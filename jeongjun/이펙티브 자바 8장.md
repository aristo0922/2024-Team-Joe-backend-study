## [Notion](https://basalt-bathroom-cb4.notion.site/8-14016748c28280f59641e13b033d3a04?pvs=4)

[ITEM 49: 매개변수가 유효한지 검사하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21) 

[ITEM 50: 적시에 방어적 복사본을 만들라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 51:  메서드 시그니처를 신중히 설계하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 52: 다중정의는 신중히 사용하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 53: 가변인수는 신중히 사용하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 54: null이 아닌, 빈 컬렉션이나 배열을 반환하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 55: 옵셔널 반환은 신중히 하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

[ITEM 56: 공개된 API 요소에는 항상 문서화 주석을 작성하라](https://www.notion.so/8-14016748c28280f59641e13b033d3a04?pvs=21)

# 메서드

메서드를 설계할 때 주의할 점들을 살펴본다. 구체적으로는 매개변수와 반환값을 어떻게 처리해야 하는지 ,메서드 시그니처는 어떻게 설계해야 하는지, 문서화는 어떻게 해야 하는지를 다룬다.

## 매개변수가 유효한지 검사하라

> 메서드에 잘못된 값이 들어오지 않도록 방어해야한다.
> 

### 매개변수 검사를 제대로 하지 않을 경우 다음 문제들이 발생할 수 있다.

- 메서드가 수행되는 중간에 모호한 예외를 던지며 실패하는 경우
- 메서드가 잘 수행됐지만 잘못된 결과를 반환하는 경우
- 메서드는 문제없이 수행됐지만, 어떤 객체를 이상한 상태로 만들어놓아, 미래의 알 수 없는 시점에 메서드와 관련 없는 오류를 발생하는 경우

### 해결 방법

1. `public` 과 `protected` 메서드의 매개변수 제약을 문서화하고, 위반 시 어떤 예외를 던지는지 명시하라
    
    이렇게 발생하는 예외도 같이 문서화 해두면, 간단한 방법으로 API 사용자가 제약을 지킬 가능성이 높아진다.
    
2. Objects.requireNonNull() 등으로 null 검사하라
    
    null 검사를 수동으로 하지 않아도 되고, 원하는 예외 메세지도 지정할 수 있다.
    
3. Java 9 이상에서는 범위 검사를 checkFromIndexSize() 같은 메서드로 쉽게 처리 가능
    
    `checkFromIndexSize` `checkFromToIndex` `checkIndex` 
    
    위 메서드들은 예외 메세지 지정불가능, 리스트와 배열 전용으로 설계되었다.
    

---

## 적시에 방어적 복사본을 만들라

> 클라이언트가 불변식을 깨뜨릴 수 있으니, 방어적 프로그래밍을 해야한다.
> 

생성자나 메서드에서 입력받은 가변 객체를 복사하자.

클래스가 가변 필드를 가진 경우 외부에서 내부를 수정할 수 있으므로 주의해야한다.

`Date` 가 가변이므로 다음과 같이 외부에서 내부 데이터를 수정할 수 있다. java 8이상 에서 `Date` 대신 `Instant`, `LocalDateTime`, `ZonedDateTime`을 사용하면 된다

이와 같은 공격을 예방하려면 적시에 객체의 방어적 복사본을 만들어야 한다.

---

## 메서드 시그니처를 신중히 설계하라

> 메세드 이름과 구조가 사용성과 유지보수성을 높이도록 설계해야 한다.
> 

### 메서드 이름을 신중히 짓자

이해할 수 있고, 같은 패키지에 속한 다른 이름과 일관되게 짓는 것이 최우선 목표이다.

널리 받아들여지는 이름을 사용하자.

적당한 길이로 짓자.

### 편의 메서드를 너무 많이 만들지 말자

메서드가 너무 많은 클래스는 익히고, 사용하고, 문서화하고, 테스트하고, 유지보수 하기 어렵다.

아주 자주 사용하는 경우에만 별도의 약칭 메서드를 두고, 확신이 없으면 만들지 말자.

### **매개변수 목록은 짧게 유지하자**

매개변수 목록은 4개 이하가 적당하다. 같은 타입의 매개변수 여러 개가 연달아 나오는 경우가 특히 좋지 않다

### **매개변수의 타입으로는 클래스보다 인터페이스가 낫다**

매개변수로 적합한 인터페이스가 있으면, `인터페이스를` 직접 사용하자.

인터페이스 대신 클래스를 사용하면, 클라이언트에게 특정 구현체만 사용하도록 제한하는 것이다.

---

## 다중정의는 신중히 사용하라

> 재정의한 메서드(Overriding)는 동적(런타임)으로 선택되며, 다중정의(overloading)한 메서드는 정적(컴파일 타임)으로 선택된다.
> 

다중정의가 혼란을 주는 상황은 피해야한다. 안전하고, 보수적으로 가려면 매개변수 수가 같은 다중정의는 만들지 말고. 가변인수를 사용하는 메서드는 다중정의를  하지 말아야한다.

### 매개변수가 같은 다중정의를 피하거나, 정적 팩터리 메서드를 사용해 이름을 구분할 수 있다.

---

## 가변인수는 신중히 사용하라

> 가변인수 메서드는 호출될 때마다 배열을 생성하기 때문에 성능 문제가 있다.
> 

가변인수는 인수 개수가 정해지지 않았을 때 아주 유용하다. 하지만, 가변인수 메서드는 호출될 때마다 배열을 새로 하나 할당하고 초기화 하므로, 성능에 민감한 상황에서는 걸림돌이 될 수 있다. 비용을 감당할 수 없지만, 가변인수의 유연성이 필요한 경우 다중정의를 통해 해결할 수 있다.

## null이 아닌, 빈 컬렉션이나 배열을 반환하라

> `null` 반환은 사용은 `null` 상황을 처리하는 코드를 추가로 작성해줘야한다.
> 

```jsx
 public List<Cheese> getCheeses() {
   return new ArrayList<>(cheesesInStock);
 }
```

null 반환과 빈 컨테이너 반환은 성능 차이가 없다싶이기 때문에 빈컬렉션을 반환하는 것이 좋다.

---

## 옵셔널 반환은 신중히 하라

> Java 8부터 제공되는 옵셔널은 명시적으로 반환값이 없을 수도 있는 상황을 명확히 표현한다.
> 

### 옵셔널은 다음과 같은 장점이 있다.

- 유요한 값이 없는 경우 빈 결과를 반환
- 예외를 던지는 메서드보다 유연하고, 사용하기 쉬움
- `null`을 반환하는 메서드보다 오류 가능성이 적음

### 옵셔널 활용

- 기본 값을 설정할 수 있다.
- 원하는 예외를 처리할 수 있다.
- 항상 값이 있음을 가정한다.

### 옵셔널 주의사항

- 옵셔널을 반환하도록 선언되어 있는 메서드는 절대 null을 반환해서는 안 된다.
- 컬렉션, 스트림, 배열, 옵셔널 등의 컨테이너 타입은 옵셔널로 감싸면 안 된다.
- 박싱된 기본 타입인 옵셔널을 반환하지 말자
- 옵셔널을 컬렉션의 키, 값, 원소로 사용하지 말자.

## 공개된 API 요소에는 항상 문서화 주석을 작성하라

> API 사용자가 의도와 사용법을 정확히 이해하도록 문서화해야 한다.
> 

- 문서화가 제대로 갖춰지지 않은 API는 오히려 쓰기 어려워 오류의 원인이 될 수 있다.
- 기본 생성자에는 문서화 주석을 달 방법이 없으므로, 공개 클래스에는 기본 생성자를 사용하면 안된다.
- 유지보수까지 고려한다면, 공개되지 않은 클래스, 인터페이스, 생성자, 메서드, 필드에도 문서화 주석을 달아야한다.

### 자바독 태그

- @param: 매개변수 설명
- @return: 반환값 설명
- @throws: 발생할 가능성이 있는 모든 예외 설명
- @implSpec: 해당 메서드와 하위 클래스 사이의 관계를 설명
- {@code}: 코드로 렌더링.
- {@literal}: HTML 마크업이나 자바독 태그 무시

### 문서화 주의사항

- 제네릭 타입이나 메서드를 문서화할 때는 모든 타입 매개변수에 주석을 달아야 한다.
- 열거 타입을 문서화할 때는 상수에도 주석을 달아야 한다.
- 애너테이션 타입을 문서화할 때는 멤버들에도 모두 주석을 달아야 한다.
- 클래스 혹은 정적 메서드가 스레드 안전하든 그렇지 않든, 스레드 안전 수준을 API 설명에 포함해야 한다.
- 직렬화 클래스라면 직렬화 형태도 기술해야줘야한다.
